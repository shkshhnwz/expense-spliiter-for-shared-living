<%- include('../partials/mainhead') %>
  <%- include('../partials/navbar') %>
    <div class="container py-4 py-sm-5 mobile-center">
      <div class="row justify-content-center">
        <div class="col-12 col-md-9 col-lg-7">
          <h2 class="inter-header text-center mb-4">Provide your monthly income details</h2>
          <div id="alert-container"></div>
          <form class="needs-validation" action="" method="post" novalidate>
            <div class="card mb-3 shadow-sm">
              <div class="card-header text-white bg-purple text-center">Source/Type of Income</div>

              <div class="card-body">
                <div class="row g-2">
                  <div class="col-12 col-md-4">
                    <div class="form-check">
                      <input class="form-check-input" type="radio" name="incomeSource" id="radioSalary" value="Salary"
                        required>
                      <label class="form-check-label" for="radioSalary">Salary</label>
                    </div>
                  </div>

                  <div class="col-12 col-md-4">
                    <div class="form-check">
                      <input class="form-check-input" type="radio" name="incomeSource" id="radioFreelance"
                        value="Freelance">
                      <label class="form-check-label" for="radioFreelance">Freelance</label>
                    </div>
                  </div>

                  <div class="col-12 col-md-4">
                    <div class="form-check">
                      <input class="form-check-input" type="radio" name="incomeSource" id="radioBusinessProfit"
                        value="BusinessProfit">
                      <label class="form-check-label" for="radioBusinessProfit">Business Profit</label>
                    </div>
                  </div>
                  <div class="col-12 col-md-4">
                    <div class="form-check">
                      <input class="form-check-input" type="radio" name="incomeSource" id="radioRental" value="Rental">
                      <label class="form-check-label" for="radioRental">Rental</label>
                    </div>
                  </div>
                  <div class="col-12 col-md-4">
                    <div class="form-check">
                      <input class="form-check-input" type="radio" name="incomeSource" id="radioInvestment"
                        value="Investment">
                      <label class="form-check-label" for="radioInvestment">Investment</label>
                    </div>
                  </div>
                  <div class="col-12 col-md-4">
                    <div class="form-check">
                      <input class="form-check-input" type="radio" name="incomeSource" id="radioOther" value="Other">
                      <label class="form-check-label" for="radioOther">Other</label>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="card mb-3 shadow-sm">
              <div class="card-header text-white bg-purple text-center">Net Income</div>
              <div class="card-body">
                <div class="mb-3">
                  <label for="amountreceived" class="form-label visually-hidden">Monthly amount</label>
                  <input type="number" class="form-control" name="amount" id="amount" placeholder="0.00" min="0"
                    required>
                </div>
              </div>
            </div>

            <div class="card mb-3 shadow-sm">
              <div class="card-header text-white bg-purple text-center">Income receipt date</div>
              <div class="card-body">
                <div class="mb-3">
                  <label for="receivedondate" class="form-label visually-hidden">Date of receving income</label>
                  <input type="date" class="form-control" name="dateReceived" id="dateReceived">
                </div>
              </div>
            </div>
            <div class="card mb-3 shadow-sm">
              <div class="card-header text-white bg-purple text-center">Description</div>
              <div class="card-body">
                <div class="form-floating">
                  <textarea class="form-control" placeholder="Describe who is the payer" id="descriptiononincome"
                    style="height: 100px" name="description"></textarea>
                  <label for="descriptiononincome">Payer details</label>
                </div>
              </div>
            </div>
            <div class="d-grid">
              <button type="submit" class="btn btn-primary">Save</button>
            </div>
          </form>
        </div>
      </div>
    </div>
    <%- include('../partials/footer') %>
      <script>
        const urlParams = new URLSearchParams(window.location.search);
        const container = document.getElementById('alert-container');

        if (urlParams.has('error')) {
          container.innerHTML = `
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
                ${urlParams.get('error')}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        `;
        }

        if (urlParams.has('success')) {
          container.innerHTML = `
            <div class="alert alert-success alert-dismissible fade show" role="alert">
                ${urlParams.get('success')}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        `;
        }

        if (urlParams.has('error') || urlParams.has('success')) {
          window.history.replaceState(null, null, window.location.pathname);
        }
     </script>